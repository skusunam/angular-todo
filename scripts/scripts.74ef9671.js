"use strict";angular.module("angularTodoApp",["ngRoute","ngAnimate"]).config(["$routeProvider",function(a){Parse.initialize("quEQw1Yal6U7nYh9JUZ3eefGky4zF1kPpJOMzhwU","2Cvg0ii5WHeVxU5ypCKeEwW1uAuB0y76u2ycYIlm"),a.when("/",{templateUrl:"views/main.html"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/todos",{templateUrl:"views/todos.html",controller:"TodosCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("angularTodoApp").controller("SignupCtrl",["$scope","$location","ParseService","UserService",function(a,b,c,d){console.log("SignupController called"),a.save=function(){console.log(a.registeredUser),c.signUp(a.registeredUser).then(function(){d.setMessage("User Saved Succesfully. Please login with your credentials."),console.log(a.status),b.path("/login")})}}]),angular.module("angularTodoApp").service("ParseService",["$q",function(a){this.signUp=function(b){var c=Parse.Object.extend("TodoUser"),d=new c;d.set("email",b.email),d.set("firstName",b.firstName),d.set("lastName",b.lastName),d.set("password",b.password);var e=a.defer();return d.save({success:function(a){console.log("signup: success  "+a),e.resolve(a)},error:function(a){console.log("signup: error",a),e.reject(a)}}),e.promise},this.login=function(b,c){var d=Parse.Object.extend("TodoUser"),e=new Parse.Query(d);e.equalTo("email",b),e.equalTo("password",c);var f=a.defer();return e.count({success:function(a){console.log("login: count = "+a),f.resolve(a)},error:function(a){console.log("login: error",a),f.reject(a)}}),f.promise}}]),angular.module("angularTodoApp").service("UserService",function(){var a,b={},c=!1;this.setMessage=function(b){a=b},this.getMessage=function(){return a},this.getUser=function(){return b},this.setUser=function(a){b=a},this.setUserLoggedIn=function(a){c=a},this.isUserLoggedIn=function(){return c}}),angular.module("angularTodoApp").controller("LoginCtrl",["$scope","$location","UserService","ParseService",function(a,b,c,d){a.message=c.getMessage(),a.login=function(){console.log(a.username,a.password),d.login(a.username,a.password).then(function(d){console.log("user count = "+d),0===d?a.message="Invalid credentials. Please re-enter email  password":(c.setUserLoggedIn(!0),b.path("/todos"))})}}]),angular.module("angularTodoApp").controller("TodosCtrl",["$scope",function(){console.log("TodosCtrl called")}]),angular.module("angularTodoApp").controller("NavCtrl",["$scope","$location","UserService",function(a,b,c){a.logout=function(){c.setUserLoggedIn(!1),b.path("/login")}}]);